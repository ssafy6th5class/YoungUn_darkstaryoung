# [BOJ]_20364_부동산다툼

### 문제

이진 트리 모양의 땅으로 이루어진 꽉꽉마을에는 오리들이 살고 있다. 땅 번호는 다음과 같이 매겨진다.

1. 루트 땅의 번호는 1이다.
2. 어떤 땅의 번호가 *K*라면, 왼쪽 자식 땅의 번호는 2 × *K*, 오른쪽 자식 땅의 번호는 2 × *K* + 1이다.

어느날 오리들끼리 부동산 다툼이 일어나서 꽉꽉마을 촌장 경완이가 해결책을 가져왔고, 그 내용은 다음과 같다.

1. 오리들을 한 줄로 대기시킨다. 맨 처음 오리들은 1번 땅에 위치해 있다.
2. 오리들이 서있는 순서대로 원하는 땅을 가지도록 한다.

![img](https://upload.acmicpc.net/1916169a-8540-4a0d-a7c9-889d6afe2842/-/preview/)

만약, 한 오리가 원하는 땅까지 가는 길에 이미 다른 오리가 점유한 땅이 있다면 막대한 세금을 내야 하는 이유로 해당 땅을 지나가지 못해 그 오리는 땅을 가지지 못한다. 오리가 원하는 땅까지 가는 길에는 오리가 원하는 땅도 포함된다.



경완이의 해결책대로 땅 분배를 했을 때 각 오리별로 원하는 땅을 가질 수 있는지, 가질 수 없다면 처음 마주치는 점유된 땅의 번호를 구해보자.

### 입력

첫 번째 줄에 땅 개수 *N*과 꽉꽉나라에 사는 오리 수 *Q*가 공백으로 구분되어 주어진다. (2 ≤ *N* < 220, 1 ≤ *Q* ≤ 200,000)

두 번째 줄부터 차례로 *Q*개의 줄에 걸쳐 *i*+1번째 줄에는 *i*번째 오리가 원하는 땅 번호 *xi*가 주어진다. (2 ≤ *xi* ≤ *N*)

### 출력

*Q*개의 줄에 원하는 땅에 갈 수 있다면 0을, 갈 수 없다면 처음 마주치는 점유된 땅의 번호를 출력한다.

### 풀이

- 경로를 계산한다
- 경로마다 방문해서 확인한다

```python
import sys

NQ = list(map(int, sys.stdin.readline().split()))
tree = [0] * (NQ[0] + 1)
for _ in range(NQ[1]):
    num = int(sys.stdin.readline())
    stack = [num]
    #경로를 계산해주자
    while num > 1:
        stack.append(num // 2)
        num = num //2
    #경로대로 가보자! 
    while stack:
        #가는 경로에 막혀있으면 해당 위치 프린트!
        if tree[stack[-1]] == 1:
            print(stack[-1])
            break
        #경로의 끝 (원하는 땅)에 도착시!
        elif len(stack) == 1:
            tree[stack[-1]] = 1
            print('0')
            break
        
        stack.pop()
```





